{% extends 'admin.layout' %}

{% block bodyclass %}
editor
{% endblock %}

{% block content %}
    <div class="row">
        <div class="small-6 columns">
            {{ form_model( post, { 'route' : { 0 : 'admin.posts.update', 1 : post.id }, 'method' : 'put' } ) }}
            {{ form_label( 'title', 'Title' ) }}
            {{ form_text( 'title' ) }}
            {{ form_label( 'slug', 'Slug' ) }}
            {{ form_text( 'slug' ) }}
            {{ form_label( 'summary', 'Summary' ) }}
            {{ form_text( 'summary' ) }}
            {{ form_label( 'category_id', 'Category' ) }}
            {{ form_select( 'category_id', categories ) }}
            {{ form_label( 'body', 'Body' ) }}
            {{ form_textarea( 'body' ) }}
            {{ form_submit( 'Save', { 'class' : 'button' } ) }}
            {{ form_close() }}
        </div>
        <div class="small-6 columns">
            <div id="preview"></div>
        </div>
    </div>
{% endblock %}

{% block javascript %}
<script src="{{ asset( 'js/showdown.min.js' ) }}"></script>
<script>
var converter = new Showdown.converter();

$( document ).ready( function() {
    $( '#preview' ).html( converter.makeHtml( $( '#body' ).val() ) );

    $( '#body' ).keyup( function() {
        $( '#preview' ).html( converter.makeHtml( $( '#body' ).val() ) );
    });
});
</script>
{% endblock %}
